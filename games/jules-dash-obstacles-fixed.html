<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini Dash - Obstacles Fixed</title>
<style>
body {
  margin:0;
  background: linear-gradient(#cdefff,#e6f7ff);
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#container {
  display:flex;
  width:1000px;
  height:420px;
  background:#ffffffcc;
  border-radius:12px;
  overflow:hidden;
}
#sidebar {
  width:80px;
  background:#f1f1f1;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px;
}
.icon {
  width:50px;
  height:50px;
  background:#ddd;
  margin:10px 0;
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
}
#shopPanel, #lockerPanel {
  display:none;
  width:220px;
  background:#fafafa;
  padding:10px;
}
#gameArea {
  flex:1;
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
}
canvas {
  background:#bde0fe;
  border-radius:8px;
}
#pauseBtn {
 position:absolute;
 top:10px;
 right:10px;
 padding:8px;
}
.colorBox {
  width:40px;
  height:40px;
  margin:5px;
  border-radius:6px;
  cursor:pointer;
}
</style>
</head>
<body>

<div id="container">

<div id="sidebar">
<div class="icon" onclick="toggleShop()">üõí</div>
<div class="icon" onclick="toggleLocker()">üé®</div>
</div>

<div id="shopPanel">
<h4>Shop</h4>
<button onclick="buySkin('fire')">üî• Fire (5‚≠ê)</button>
<button onclick="buySkin('ice')">‚ùÑÔ∏è Ice (5‚≠ê)</button>
<p id="score">‚≠ê 0</p>
</div>

<div id="lockerPanel">
<h4>Locker</h4>
<div style="display:flex;">
<div class="colorBox" style="background:red" onclick="equipSkin('fire')"></div>
<div class="colorBox" style="background:lightblue" onclick="equipSkin('ice')"></div>
</div>
</div>

<div id="gameArea">
<button id="pauseBtn">‚è∏</button>
<canvas id="game" width="700" height="350"></canvas>
</div>

</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

let paused=false;
document.getElementById("pauseBtn").onclick=()=>paused=!paused;

let player = { x:80, y:280, size:30, dy:0, gravity:0.7, jump:-14 };
let obstacles = [];
let points = [];
let score = 0;
let frame = 0;
let speed = 6;

let ownedSkins = {fire:true};
let currentSkin="fire";

function toggleShop(){
 document.getElementById("shopPanel").style.display="block";
 document.getElementById("lockerPanel").style.display="none";
}
function toggleLocker(){
 document.getElementById("lockerPanel").style.display="block";
 document.getElementById("shopPanel").style.display="none";
}

function drawPlayer(){
 ctx.fillStyle = currentSkin==="fire" ? "red" : "lightblue";
 ctx.fillRect(player.x,player.y,player.size,player.size);
}

function drawGround(){
 ctx.fillStyle="#219ebc";
 ctx.fillRect(0,320,700,30);
}

function drawObstacles(){
 ctx.fillStyle="#ff595e";
 obstacles.forEach(o=>{
   ctx.beginPath();
   ctx.moveTo(o.x,o.y+o.h);
   ctx.lineTo(o.x+o.w/2,o.y);
   ctx.lineTo(o.x+o.w,o.y+o.h);
   ctx.closePath();
   ctx.fill();
 });
}

function updatePlayer(){
 player.dy+=player.gravity;
 player.y+=player.dy;
 if(player.y>280){ player.y=280; player.dy=0; }
}

function updateObstacles(){
 if(frame%60===0){
   obstacles.push({x:700,y:290,w:30,h:30});
 }
 obstacles.forEach(o=> o.x-=speed);
}

function detectCollision(){
 obstacles.forEach(o=>{
   if(player.x < o.x+o.w &&
      player.x+player.size > o.x &&
      player.y < o.y+o.h &&
      player.y+player.size > o.y){
       resetGame();
   }
 });
}

function resetGame(){
 player.x=80; player.y=280;
 obstacles=[];
}

function loop(){
 if(paused) return requestAnimationFrame(loop);

 ctx.clearRect(0,0,700,350);
 drawGround();
 updatePlayer();
 updateObstacles();
 detectCollision();
 drawPlayer();
 drawObstacles();
 frame++;
 requestAnimationFrame(loop);
}

window.addEventListener('keydown',e=>{
 if(e.code==='Space' && player.dy===0){
   player.dy=player.jump;
 }
});

loop();
</script>
</body>
</html>
